# 📝 博客文章编辑功能使用指南

## 🎉 新功能介绍

现在你的博客编辑器支持编辑现有文章了！你可以直接从编辑器界面选择已发布的文章进行修改。

## 🚀 如何使用

### 1. 启动编辑器
```bash
# 双击运行
启动博客编辑器.bat

# 或者手动启动
cd blog-writing-service
node server/server-fixed.js
```

### 2. 访问编辑器
打开浏览器访问：**http://localhost:3001/editor/editor.html**

### 3. 编辑现有文章

#### 方法一：使用"编辑现有文章"按钮
1. 点击页面顶部的 **"编辑现有文章"** 按钮
2. 在弹出的文章选择器中浏览所有已发布的文章
3. 使用搜索框快速找到想要编辑的文章
4. 点击文章右侧的 **"编辑"** 按钮

#### 方法二：直接搜索
1. 在文章选择器的搜索框中输入文章标题或文件名
2. 系统会实时过滤显示匹配的文章
3. 选择要编辑的文章

### 4. 编辑文章内容
- 文章加载后，编辑器会自动填充标题和内容
- 顶部会显示蓝色的编辑模式指示器
- 发布按钮会变为 **"更新文章"**
- 像编辑新文章一样修改内容

### 5. 保存更改
- **保存草稿**：保存当前编辑状态，不发布
- **更新文章**：发布更新后的文章，替换原文章

### 6. 退出编辑模式
- 点击编辑模式指示器中的 **"退出编辑模式"**
- 或点击 **"新建文章"** 按钮开始写新文章

## ✨ 功能特色

### 🔍 智能搜索
- 支持按文章标题搜索
- 支持按文件名搜索
- 实时过滤结果

### 🎯 编辑模式指示
- 清晰的编辑模式提示
- 显示正在编辑的文件名
- 一键退出编辑模式

### 📝 内容转换
- 自动将HTML内容转换回Markdown格式
- 保持原有的格式和结构
- 支持标题、列表、链接、图片等元素

### 🔄 无缝更新
- 更新文章时保持原有的发布时间
- 自动更新博客列表
- 保持封面图片（如果存在）

## 🛠️ 技术实现

### 新增API端点

#### 获取文章编辑数据
```
GET /api/posts/:filename/edit
```
返回适合编辑的Markdown格式内容

#### 更新现有文章
```
PUT /api/posts/:filename
```
更新指定文章的内容

### 前端功能
- 文章选择器界面
- 编辑模式状态管理
- 搜索和过滤功能
- 编辑模式指示器

## 📋 使用流程图

```
开始
  ↓
访问编辑器
  ↓
点击"编辑现有文章"
  ↓
选择要编辑的文章
  ↓
编辑器加载文章内容
  ↓
修改标题和内容
  ↓
点击"更新文章"
  ↓
文章更新成功
  ↓
跳转到博客列表
```

## 🎯 快捷键

- **Ctrl+S**：保存草稿
- **Ctrl+Enter**：发布/更新文章

## 📝 注意事项

1. **备份重要文章**：编辑前建议备份重要文章
2. **文件名保持不变**：更新文章时文件名不会改变
3. **发布时间保持**：更新不会改变原始发布时间
4. **封面图片**：会尽量保持原有封面，如果没有则生成新的

## 🔧 故障排除

### 文章列表加载失败
- 检查服务器是否正常运行
- 确认blog目录中有文章文件

### 文章内容显示异常
- 某些复杂的HTML结构可能转换不完美
- 可以手动调整Markdown格式

### 更新失败
- 检查文章标题和内容是否为空
- 确认文件权限正常

## 🎊 开始使用

现在就去试试编辑功能吧！访问 http://localhost:3001/editor/editor.html 开始编辑你的文章。

---

**提示：这个功能完全兼容现有的新文章创建流程，你可以随时在编辑现有文章和创建新文章之间切换。**