# 博客写作服务使用指南

## 🚀 快速开始

### 1. 安装和启动

首先，确保您在项目根目录，然后执行以下命令：

```bash
# 进入博客写作服务目录
cd blog-writing-service

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

启动成功后，您会看到类似以下的输出：
```
🚀 博客写作服务已启动
📝 编辑器地址: http://localhost:3001/editor/editor.html
🔧 API地址: http://localhost:3001/api
⚡ 环境: development
```

### 2. 访问编辑器

打开浏览器，访问：`http://localhost:3001/editor/editor.html`

## 📝 使用编辑器

### 编写新文章

1. **输入标题**
   - 在"文章标题"输入框中输入您的博文标题
   - 系统会自动显示字符计数（最多100字符）
   - 标题将用于自动生成文件名和封面图片

2. **编写内容**
   - 在"文章内容"文本区域编写您的博文
   - 支持Markdown语法
   - 右侧会显示实时预览

3. **使用工具栏**
   - **粗体** (Ctrl+B): 添加 `**粗体文字**`
   - **斜体** (Ctrl+I): 添加 `*斜体文字*`
   - **标题**: 添加 `## 标题`
   - **链接**: 添加 `[链接文字](URL)`
   - **图片**: 打开图片上传对话框
   - **代码**: 添加 `` `代码` ``
   - **列表**: 添加 `- 列表项`

### 保存和发布

1. **保存草稿**
   - 点击"保存草稿"按钮
   - 系统会自动保存到本地
   - 支持自动保存功能（每30秒）

2. **发布文章**
   - 点击"发布文章"按钮
   - 确认发布信息
   - 系统会自动：
     - 生成封面图片
     - 创建HTML文件
     - 更新博客列表
     - 生成文章目录

## 🎨 Markdown语法支持

### 基础语法

```markdown
# 一级标题
## 二级标题
### 三级标题

**粗体文字**
*斜体文字*

[链接文字](https://example.com)

![图片描述](图片路径)

`行内代码`

```代码块```

- 无序列表项1
- 无序列表项2

1. 有序列表项1
2. 有序列表项2

> 引用文字
```

### 高级功能

- **自动目录生成**: 使用 `##` 等标题标签，系统会自动生成左侧目录
- **图片上传**: 点击工具栏图片按钮，支持拖拽上传
- **代码高亮**: 使用三个反引号包围代码块

## 📁 文件组织

发布后的文件会按以下结构组织：

```
your-website/
├── blog/                    # 博文HTML文件
│   ├── your-post-title.html
│   └── another-post.html
├── blog-img/               # 图片和封面
│   ├── your-post-title.png
│   └── uploaded-image.jpg
└── blog.html              # 博客列表页（自动更新）
```

## 🔧 功能特性

### 1. 自动封面生成
- 基于文章标题自动生成封面图片
- 保持与网站风格一致的设计
- 自动保存到 `blog-img/` 文件夹

### 2. 智能文件命名
- 根据标题自动生成文件名
- 处理中文字符和特殊符号
- 避免文件名冲突

### 3. 博客列表自动更新
- 新文章自动添加到 `blog.html`
- 按发布时间倒序排列
- 保持现有页面样式和结构

### 4. 目录自动生成
- 扫描文章中的标题标签
- 生成层级目录结构
- 支持点击跳转和滚动高亮

## 🎯 最佳实践

### 文章结构建议

```markdown
# 文章主标题

## 介绍
简要介绍文章内容...

## 主要内容
### 子章节1
具体内容...

### 子章节2
具体内容...

## 总结
总结文章要点...
```

### 图片使用建议

1. **图片格式**: 推荐使用 PNG、JPG 或 WebP 格式
2. **图片大小**: 建议单个图片不超过 5MB
3. **图片命名**: 使用有意义的文件名
4. **图片优化**: 上传前适当压缩图片以提高加载速度

### 内容编写建议

1. **标题层级**: 合理使用 H2、H3 等标题，便于生成目录
2. **段落分隔**: 适当使用空行分隔段落，提高可读性
3. **代码示例**: 使用代码块展示代码，指定语言以获得语法高亮
4. **链接使用**: 为外部链接添加有意义的描述文字

## 🐛 常见问题

### Q: 编辑器无法访问？
A: 确保服务器已启动，检查端口3001是否被占用。

### Q: 图片上传失败？
A: 检查图片格式和大小，确保符合要求（PNG/JPG/WebP，<5MB）。

### Q: 发布后博客列表没有更新？
A: 检查 `blog.html` 文件权限，确保服务器有写入权限。

### Q: 目录没有生成？
A: 确保文章中使用了标题标签（##、###等），至少需要一个标题。

### Q: 草稿丢失了？
A: 草稿保存在 `blog-writing-service/drafts/` 目录，检查该目录下的JSON文件。

## 📞 技术支持

如果遇到问题，请检查：

1. **控制台错误**: 打开浏览器开发者工具查看错误信息
2. **服务器日志**: 查看终端中的服务器输出
3. **文件权限**: 确保相关目录有读写权限
4. **端口占用**: 确保3001端口未被其他程序占用

---

**提示**: 这是一个开发版本，建议在正式使用前进行充分测试。